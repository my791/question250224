<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>性嗜好セルフチェックテスト</title>
    <style>
        body {
            font-family: sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .question-container {
            background: white;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .category-title {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
        }
        .question {
            margin-bottom: 15px;
            padding: 10px;
        }
        .options {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        .option-btn {
            padding: 8px 15px;
            border: 1px solid #ddd;
            border-radius: 20px;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
        }
        .option-btn:hover {
            background: #f0f0f0;
        }
        .option-btn.selected {
            background: #007bff;
            color: white;
            border-color: #0056b3;
        }
        .results {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            display: none;
        }
        .category-score {
            margin-bottom: 15px;
        }
        .progress-bar {
            width: 100%;
            height: 20px;
            background: #eee;
            border-radius: 10px;
            overflow: hidden;
        }
        .progress {
            height: 100%;
            background: #007bff;
            transition: width 0.3s;
        }
        button#calculate {
            display: block;
            width: 100%;
            padding: 15px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            cursor: pointer;
            margin: 20px 0;
        }
        button#calculate:hover {
            background: #0056b3;
        }
        .diagnosis {
            margin-top: 10px;
            font-style: italic;
            color: #333;
            line-height: 1.6;
        }
        @media (max-width: 600px) {
            body {
                padding: 10px;
            }
            .options {
                flex-direction: column;
            }
            .option-btn {
                width: 100%;
                text-align: left;
            }
        }
    </style>
</head>
<body>
    <h1>性嗜好セルフチェックテスト</h1>
    <p>各質問に対して最も近い選択肢をクリックし、「結果を計算する」を押してください。</p>
    <div id="quiz">
        <!-- A. プレイの幅・冒険心 -->
        <div class="question-container">
            <div class="question" data-category="A" data-question="1">
                1. 新しいプレイや未知のシチュエーションに強い好奇心を持っている。
                <div class="options"></div>
            </div>
            <div class="question" data-category="A" data-question="2">
                2. 自宅以外の場所でも、安全が確保できれば試してみたいと思う。
                <div class="options"></div>
            </div>
            <div class="question" data-category="A" data-question="3">
                3. 性的グッズやアイテムを調べたり購入したりすることに抵抗がない。
                <div class="options"></div>
            </div>
            <div class="question" data-category="A" data-question="4">
                4. "ちょっとハードかも？"と思う提案でもパートナーがOKなら試してみたい。
                <div class="options"></div>
            </div>
        </div>

        <!-- B. ライトSM -->
        <div class="question-container">
            <div class="question" data-category="B" data-question="5">
                5. 軽い拘束（手錠、アイマスク、ロープなど）に興奮を感じる。
                <div class="options"></div>
            </div>
            <div class="question" data-category="B" data-question="6">
                6. 軽めのスパンキング（叩く / 叩かれる）など痛みを伴う刺激に抵抗がない。
                <div class="options"></div>
            </div>
            <div class="question" data-category="B" data-question="7">
                7. 主従関係や上下関係をイメージしたプレイに心惹かれる。
                <div class="options"></div>
            </div>
            <div class="question" data-category="B" data-question="8">
                8. 「ちょっと乱暴に扱われる」または「相手を少し強めに扱う」ことで燃える。
                <div class="options"></div>
            </div>
        </div>

        <!-- C. ハードSM -->
        <div class="question-container">
            <div class="question" data-category="C" data-question="9">
                9. ピンチクリップやロウソクなど、強い痛み・刺激があるプレイに興味がある。
                <div class="options"></div>
            </div>
            <div class="question" data-category="C" data-question="10">
                10. 屈辱感や辱める・辱められるような精神的支配が大きな興奮につながる。
                <div class="options"></div>
            </div>
            <div class="question" data-category="C" data-question="11">
                11. 傷跡やアザなど、目に見える形でプレイの痕が残るのを肯定的に捉えられる。
                <div class="options"></div>
            </div>
            <div class="question" data-category="C" data-question="12">
                12. 自分はサディスト（加虐嗜好）またはマゾヒスト（被虐嗜好）としての自覚がある。
                <div class="options"></div>
            </div>
        </div>

        <!-- D. 寝取られ/スワッピング -->
        <div class="question-container">
            <div class="question" data-category="D" data-question="13">
                13. パートナーが他人と性行為をするところを想像すると興奮する。
                <div class="options"></div>
            </div>
            <div class="question" data-category="D" data-question="14">
                14. 3Pやグループでのプレイに対して、どこか魅力を感じる。
                <div class="options"></div>
            </div>
            <div class="question" data-category="D" data-question="15">
                15. 嫉妬や独占欲と性的興奮が結びつく「寝取られシチュエーション」に興味がある。
                <div class="options"></div>
            </div>
            <div class="question" data-category="D" data-question="16">
                16. 他の人のパートナーを"寝取る"行為に対して背徳感と興奮を覚える。
                <div class="options"></div>
            </div>
        </div>

        <!-- E. フェティシズム -->
        <div class="question-container">
            <div class="question" data-category="E" data-question="17">
                17. 特定の身体パーツ（足、手、首筋など）を見るだけで強く惹かれる。
                <div class="options"></div>
            </div>
            <div class="question" data-category="E" data-question="18">
                18. パートナーの体臭や下着の匂いなど、嗅覚的要素に強い興奮を感じる。
                <div class="options"></div>
            </div>
            <div class="question" data-category="E" data-question="19">
                19. ランジェリーやラバー、コスチュームなど衣装そのものが大きな刺激になる。
                <div class="options"></div>
            </div>
            <div class="question" data-category="E" data-question="20">
                20. 自分のフェチ対象（下着、靴、写真など）をコレクションしたり眺めるのが好き。
                <div class="options"></div>
            </div>
        </div>

        <!-- F. 露出・覗き -->
        <div class="question-container">
            <div class="question" data-category="F" data-question="21">
                21. 他人に見られるかもしれないスリルに快感を覚える。
                <div class="options"></div>
            </div>
            <div class="question" data-category="F" data-question="22">
                22. 自分の性的行為を第三者に見られていると想像すると興奮する。
                <div class="options"></div>
            </div>
            <div class="question" data-category="F" data-question="23">
                23. 誰かの性行為を盗み見る（覗き見る）というシチュエーションに強い関心がある。
                <div class="options"></div>
            </div>
            <div class="question" data-category="F" data-question="24">
                24. 露出やストリップのような大胆なパフォーマンスに憧れがある。
                <div class="options"></div>
            </div>
        </div>

        <!-- G. ロールプレイ・非日常 -->
        <div class="question-container">
            <div class="question" data-category="G" data-question="25">
                25. コスプレやキャラクターになりきって行うプレイが大好き / 興味がある。
                <div class="options"></div>
            </div>
            <div class="question" data-category="G" data-question="26">
                26. 物語や設定を考え、それになりきりながら演じると燃える。
                <div class="options"></div>
            </div>
            <div class="question" data-category="G" data-question="27">
                27. ファンタジー世界（騎士と姫、悪魔と生贄など）を想像して盛り上がることがある。
                <div class="options"></div>
            </div>
            <div class="question" data-category="G" data-question="28">
                28. 言葉責めやセリフ回しなど、演技や会話のシチュエーションに強く興奮を感じる。
                <div class="options"></div>
            </div>
        </div>

        <!-- H. マニアック・エクストリーム -->
        <div class="question-container">
            <div class="question" data-category="H" data-question="29">
                29. 肉体的リスクが高い行為（窒息プレイなど）に強い興味や魅力を感じる。
                <div class="options"></div>
            </div>
            <div class="question" data-category="H" data-question="30">
                30. 食べ物や体液など、通常タブー視されがちなものと組み合わせるプレイに関心がある。
                <div class="options"></div>
            </div>
            <div class="question" data-category="H" data-question="31">
                31. タトゥーやピアッシング、身体改造など「痛みやリスクを伴う」要素に惹かれる。
                <div class="options"></div>
            </div>
            <div class="question" data-category="H" data-question="32">
                32. 人にはあまり理解されなさそうな特殊な性癖を自覚している。
                <div class="options"></div>
            </div>
        </div>

        <button id="calculate">結果を計算する</button>

        <div id="results" class="results">
            <h2>分析結果</h2>
            <div id="category-results"></div>
        </div>
    </div>

<script>
window.addEventListener('DOMContentLoaded', (event) => {
    // 【1】選択肢を定義
    const options = [
        { value: 3, text: 'はい / 強く当てはまる' },
        { value: 2, text: 'どちらかといえば当てはまる' },
        { value: 1, text: 'どちらでもない' },
        { value: 0, text: 'いいえ / 当てはまらない' }
    ];

    // すべての.optionsクラスを持つ要素に対して選択肢を追加
    const optionsContainers = document.querySelectorAll('.options');
    optionsContainers.forEach(container => {
        options.forEach(option => {
            const button = document.createElement('button');
            button.className = 'option-btn';
            button.textContent = option.text;
            button.setAttribute('data-value', option.value);

            button.addEventListener('click', function() {
                // 同じ質問の他の選択肢から選択状態を解除
                container.querySelectorAll('.option-btn').forEach(btn => {
                    btn.classList.remove('selected');
                });
                // クリックされたボタンを選択状態に
                this.classList.add('selected');
            });

            container.appendChild(button);
        });
    });

    // 回答を簡略化する（表示用）の関数
    function simplifyAnswer(text) {
        if (text.includes('強く当てはまる')) return 'はい';
        if (text.includes('どちらかといえば')) return 'やや';
        if (text.includes('どちらでもない')) return '中';
        return 'いいえ';
    }

    // 【2】スコアに応じた診断メッセージを返す辞書（カテゴリごと）
    // 各カテゴリ最大12点（4問×3点）を想定して、0-4 / 5-8 / 9-12 の3段階に分けています。
    const categoryCommentary = {
        'A': {
            low:  '【冒険心 低】新しいプレイへの興味は低め。安心感や安定感を重視するタイプかもしれません。',
            mid:  '【冒険心 中】ある程度の好奇心があり、新しいことにも比較的前向き。パートナーとの相談次第で幅を広げられそう。',
            high: '【冒険心 高】非常にチャレンジ精神旺盛。新しいプレイやシチュエーションを積極的に試す傾向が強いです。'
        },
        'B': {
            low:  '【ライトSM 低】ソフトなSM要素にはあまり関心がないか、抵抗があるかもしれません。',
            mid:  '【ライトSM 中】軽い拘束やスパンキングなどのライトSMを楽しめる可能性がありそうです。',
            high: '【ライトSM 高】ライトSMのプレイが大好物かも？ ソフトな刺激や主従関係に強く惹かれる傾向。'
        },
        'C': {
            low:  '【ハードSM 低】強い痛みや精神的支配にはあまり興味がないタイプ。',
            mid:  '【ハードSM 中】痛みや屈辱などにやや興奮を感じることも。状況によっては楽しめる可能性があります。',
            high: '【ハードSM 高】かなりハードなSM嗜好をお持ちの可能性。サディスト/マゾヒストとして強い一面がありそうです。'
        },
        'D': {
            low:  '【寝取られ系 低】パートナーの浮気やスワッピングへの興奮はあまり感じないタイプ。',
            mid:  '【寝取られ系 中】シチュエーション次第では、寝取られ/スワッピングに興味を抱くことがあるかもしれません。',
            high: '【寝取られ系 高】パートナーが他者と関係するシーンや複数プレイへの強い興味・興奮を覚えるタイプ。'
        },
        'E': {
            low:  '【フェチ度 低】特定の部位・匂い・衣装への強い執着はあまりないかも。',
            mid:  '【フェチ度 中】ある程度フェチの要素があり、対象次第では強く興奮する可能性があります。',
            high: '【フェチ度 高】特定のパーツ・匂い・衣装などへのこだわりが強く、フェチの満足度がとても大切になるタイプ。'
        },
        'F': {
            low:  '【露出・覗き 低】見られる・見るというシチュエーションにはさほど興味がないようです。',
            mid:  '【露出・覗き 中】多少のスリルや voyeuristic な要素に興味を示すかもしれません。',
            high: '【露出・覗き 高】見せる・見る・スリルを味わう行為に強い関心があります。背徳感が興奮のカギになるタイプ。'
        },
        'G': {
            low:  '【ロールプレイ 低】演技やファンタジー要素にはあまり惹かれない、現実志向かもしれません。',
            mid:  '【ロールプレイ 中】コスプレや物語設定など、場合によっては楽しめる余地がありそうです。',
            high: '【ロールプレイ 高】コスチュームや設定をしっかり作り込むほど燃えるタイプ。非日常感に強く魅力を感じます。'
        },
        'H': {
            low:  '【マニアック嗜好 低】いわゆるエクストリーム系の性癖にはほぼ興味がないようです。',
            mid:  '【マニアック嗜好 中】特殊プレイやタブー要素に少し興味はあるものの、抵抗感も少なくないかもしれません。',
            high: '【マニアック嗜好 高】かなり尖った趣味嗜好を持っている可能性大。安全・合意には一層の注意が必要です。'
        }
    };

    // カテゴリーの名前（表示用）
    const categoryNames = {
        'A': 'プレイの幅・冒険心',
        'B': 'ライトSM',
        'C': 'ハードSM',
        'D': '寝取られ / スワッピング',
        'E': 'フェティシズム',
        'F': '露出・覗き',
        'G': 'ロールプレイ・非日常',
        'H': 'マニアック / エクストリーム'
    };

    // 診断コメントを返す関数（スコアに応じて3段階に分ける例）
    function getDiagnosis(category, score) {
        if (score <= 4) {
            return categoryCommentary[category].low;
        } else if (score <= 8) {
            return categoryCommentary[category].mid;
        } else {
            return categoryCommentary[category].high;
        }
    }

    // 【3】結果を計算するボタンのイベントリスナー
    document.getElementById('calculate').addEventListener('click', function() {
        const categories = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H'];
        const results = {};

        // カテゴリーごとの集計
        categories.forEach(category => {
            const questions = document.querySelectorAll(`[data-category="${category}"]`);
            let total = 0;
            let answered = 0;
            let answerDetails = [];

            questions.forEach(question => {
                const selectedButton = question.querySelector('.option-btn.selected');
                if (selectedButton) {
                    const value = parseInt(selectedButton.getAttribute('data-value'));
                    const questionNum = question.getAttribute('data-question');
                    const answerText = simplifyAnswer(selectedButton.textContent);
                    
                    total += value;
                    answered++;
                    answerDetails.push(`Q${questionNum}: ${answerText}`);
                }
            });

            results[category] = {
                score: total,
                answered: answered,
                details: answerDetails
            };
        });

        // 結果表示する要素
        const resultsDiv = document.getElementById('results');
        const categoryResults = document.getElementById('category-results');
        categoryResults.innerHTML = '';

        // 全体の合計点と回答数を計算
        let totalScore = 0;
        let totalAnswered = 0;
        categories.forEach(category => {
            totalScore += results[category].score;
            totalAnswered += results[category].answered;
        });

        // 【A】全体の結果を表示
        const totalDiv = document.createElement('div');
        totalDiv.className = 'category-score';
        totalDiv.innerHTML = `
            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                <strong>総合結果</strong>
                <span>合計 ${totalScore}点 (回答数: ${totalAnswered}/32)</span>
            </div>
        `;
        categoryResults.appendChild(totalDiv);

        // 【B】カテゴリーごとの結果を表示
        categories.forEach(category => {
            const { score, answered, details } = results[category];
            // 最高スコアは4問×3点=12点
            const percentage = answered > 0 ? (score / (answered * 3) * 100).toFixed(1) : 0;
            
            const div = document.createElement('div');
            div.className = 'category-score';
            
            // 診断コメントを取得
            const diagnosisText = getDiagnosis(category, score);

            // カテゴリー名・スコアなどを表示
            div.innerHTML = `
                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                    <strong>${categoryNames[category]}</strong>
                    <span>${percentage}% (${score}点)</span>
                </div>
                <div class="progress-bar">
                    <div class="progress" style="width: ${percentage}%;"></div>
                </div>
                <div style="font-size: 0.8em; color: #666; margin-top: 4px;">
                    回答詳細: ${details.join(' | ')}
                </div>
                <!-- 診断コメントを表示 -->
                <div class="diagnosis">
                    ${diagnosisText}
                </div>
            `;
            
            categoryResults.appendChild(div);
        });

        // 結果表示領域を可視化
        resultsDiv.style.display = 'block';
        resultsDiv.scrollIntoView({ behavior: 'smooth' });
    });
});
</script>
</body>
</html>
